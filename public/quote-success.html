<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quote Submitted | CONSTANTLY CODING LLC</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b1120;
      --panel: #111827;
      --card: #1e293b;
      --text: #e2e8f0;
      --muted: #94a3b8;
      --brand: #38bdf8;
      --brand-2: #0ea5e9;
      --accent: #22d3ee;
      --success: #34d399;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: radial-gradient(1200px 600px at 10% -10%, rgba(56,189,248,.15), transparent 40%),
                  radial-gradient(900px 500px at 100% 0, rgba(34,211,238,.12), transparent 35%),
                  var(--bg);
      color: var(--text);
      font-family: 'Roboto', sans-serif;
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .wrap {
      width: 100%;
      max-width: 880px;
      background: linear-gradient(180deg, rgba(30,41,59,.9), rgba(17,24,39,.9));
      border: 1px solid rgba(148,163,184,.15);
      border-radius: 18px;
      padding: 28px;
      box-shadow: 0 0 0 1px rgba(56,189,248,.05), 0 12px 40px rgba(2,8,23,.6);
      position: relative;
      overflow: hidden;
    }
    .halo {
      position: absolute;
      inset: -60px -60px auto auto;
      width: 280px; height: 280px;
      background: radial-gradient(closest-side, rgba(56,189,248,.2), transparent 70%);
      filter: blur(18px);
      pointer-events: none;
    }
    h1 {
      margin: 0 0 8px;
      font-family: 'Orbitron', sans-serif;
      color: var(--brand);
      letter-spacing: .5px;
      text-align: center;
      font-size: clamp(1.4rem, 1.1rem + 1.2vw, 2rem);
    }
    .subhead {
      text-align: center;
      color: var(--muted);
      margin-bottom: 24px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(52,211,153,.12);
      color: #d1fae5;
      border: 1px solid rgba(52,211,153,.35);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 600;
      font-size: .95rem;
      margin: 0 auto 18px;
    }
    .grid {
      display: grid;
      grid-template-columns: 1.25fr .9fr;
      gap: 18px;
    }
    @media (max-width: 800px) {
      .grid { grid-template-columns: 1fr; }
    }
    .card {
      background: var(--card);
      border: 1px solid rgba(148,163,184,.14);
      border-radius: 14px;
      padding: 18px;
    }
    .card h2 {
      margin: 0 0 10px;
      font-family: 'Orbitron', sans-serif;
      color: var(--accent);
      font-size: 1.1rem;
    }
    .row { display: grid; grid-template-columns: 140px 1fr; gap: 10px; margin: 8px 0; }
    .label { color: var(--muted); }
    .value { color: var(--text); word-break: break-word; }
    .services {
      margin: 8px 0 0;
      padding-left: 18px;
    }
    .services li {
      margin: 6px 0;
      line-height: 1.35;
    }
    .total {
      display: flex; justify-content: space-between; align-items: center;
      border-top: 1px dashed rgba(148,163,184,.3);
      margin-top: 14px; padding-top: 12px;
      font-weight: 700;
    }
    .total .amt { color: var(--brand); font-size: 1.1rem; }
    .actions {
      display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;
      margin-top: 20px;
    }
    .btn {
      appearance: none; border: 1px solid rgba(56,189,248,.35);
      background: linear-gradient(180deg, rgba(56,189,248,.18), rgba(56,189,248,.08));
      color: var(--text);
      padding: 10px 14px; border-radius: 10px; cursor: pointer;
      font-weight: 700;
    }
    .btn.primary {
      border-color: transparent;
      background: linear-gradient(180deg, var(--brand), var(--brand-2));
      color: #00111f;
    }
    footer {
      text-align: center;
      color: var(--muted);
      margin-top: 16px;
      font-size: .9rem;
    }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .divider { height: 1px; background: rgba(148,163,184,.12); margin: 10px 0 14px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="halo" aria-hidden="true"></div>

    <div class="badge">
      <span>✅</span> Quote request received
    </div>
    <h1>Thanks, <span id="name">Friend</span>!</h1>
    <p class="subhead">We’ve emailed your quote summary and will reach out shortly.</p>

    <div class="grid">
      <!-- Summary -->
      <section class="card">
        <h2>Quote Summary</h2>

        <div class="row">
          <div class="label">Confirmation</div>
          <div class="value mono" id="confirmId">—</div>
        </div>

        <div class="row">
          <div class="label">Email</div>
          <div class="value" id="email">—</div>
        </div>

        <div class="row">
          <div class="label">Business</div>
          <div class="value" id="business">—</div>
        </div>

        <div class="divider"></div>

        <div class="row" style="grid-template-columns: 1fr;">
          <div class="label">Selected Services</div>
          <ul id="servicesList" class="services"></ul>
        </div>

        <div class="total">
          <div>Total</div>
          <div class="amt" id="total">$0</div>
        </div>
      </section>

      <!-- Message -->
      <section class="card">
        <h2>Your Note</h2>
        <p id="message" style="white-space: pre-wrap; color: var(--text); min-height: 120px;">—</p>

        <div class="actions">
          <button class="btn" onclick="window.print()">Download / Print</button>
          <a class="btn primary" href="home.html">Return Home</a>
        </div>
      </section>
    </div>

    <footer>&copy; 2025 CONSTANTLY CODING LLC. All Rights Reserved.</footer>
  </div>

  <script>
    // Helper: get query params safely
    const q = new URLSearchParams(window.location.search);
    const get = (k, d = "") => (q.get(k) || d).trim();

    // Fill basics
    const fromName = get("from_name", "Friend");
    const replyTo = get("reply_to", "—");
    const business = get("business_name", "—");
    const total = get("total_price", "$0");
    const message = get("message", "—");
    const rawServices = get("selected_services", "");

    // Simple confirmation ID using timestamp-entropy
    const id = "Q-" + new Date().toISOString().replace(/[-:.TZ]/g, "").slice(0,14);

    // Put into DOM
    document.getElementById("name").textContent = fromName;
    document.getElementById("email").textContent = replyTo || "—";
    document.getElementById("business").textContent = business || "—";
    document.getElementById("total").textContent = total || "$0";
    document.getElementById("message").textContent = message || "—";
    document.getElementById("confirmId").textContent = id;

    // Normalize services into list items
    const servicesListEl = document.getElementById("servicesList");
    function renderServices(text) {
      let lines = [];
      if (!text) lines = [];
      else if (text.includes("\n")) lines = text.split("\n");
      else if (text.includes("•")) lines = text.split("•");
      else lines = text.split(",");

      lines = lines
        .map(s => s.replace(/^•/,"").trim())
        .filter(Boolean);

      if (lines.length === 0) {
        const li = document.createElement("li");
        li.textContent = "No services selected.";
        li.style.color = "#94a3b8";
        servicesListEl.appendChild(li);
        return;
      }
      lines.forEach(svc => {
        const li = document.createElement("li");
        li.textContent = svc;
        servicesListEl.appendChild(li);
      });
    }
    renderServices(rawServices);
  </script>
</body>
</html>
